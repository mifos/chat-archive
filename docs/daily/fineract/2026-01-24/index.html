<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>#fineract 2026-01-24</title>
  <link rel="stylesheet" href="../../../assets/chat-archive.css">
</head>
<body>
  <main class="archive-page">
<header class="archive-header"><p class="archive-breadcrumb"><a href="../../../">Channels</a> / <a href="../">#fineract</a> / 2026-01-24</p><h1>#fineract 2026-01-24</h1></header><section class="archive-log"><article class="archive-message"><div class="archive-meta"><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769231272364899" title="Sat, 24 Jan 2026 05:07:52 GMT">Sat 05:07</a><span class="archive-user">Nirattay Biswas</span></div><div class="archive-text"><span class="archive-line">@Nirattay Biswas has joined the channel</span></div></article><article class="archive-message"><div class="archive-meta"><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769235853276889?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 24 Jan 2026 06:24:13 GMT">Sat 06:24</a><span class="archive-user">Krishna Mewara (DeathGun44)</span></div><div class="archive-text"><span class="archive-line">Hey guys, quick question on <strong>FINERACT-1934</strong> (thread accumulation).<a class="archive-link" href="https://issues.apache.org/jira/browse/FINERACT-1934">https://issues.apache.org/jira/browse/FINERACT-1934</a></span><br><br><span class="archive-line">I tried moving to a `ThreadPoolTaskExecutor` but it&#39;s causing context propagation issues during startup (Liquibase failures).</span><br><span class="archive-line">I thought of just adding a concurrency limit to the existing `SimpleAsyncTaskExecutor` to stop the leaks. But I&#39;m worried that might deadlock the boot process if we have startup events waiting on each other.</span><br><br><span class="archive-line">Has anyone successfully capped the `ApplicationEventMulticaster` before or have suggestions on the `ThreadPoolTaskExecutor`?</span></div></article><section class="archive-thread" aria-label="Thread replies"><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769264207437429?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 24 Jan 2026 14:16:47 GMT">Sat 14:16</a><span class="archive-user">Victor Romero</span></div><div class="archive-text"><span class="archive-line">I think you should get more information about the hardware, the OS, the system parameters in order to replicate the scenario.</span></div></article><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769269075175999?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 24 Jan 2026 15:37:55 GMT">Sat 15:37</a><span class="archive-user">Krishna Mewara (DeathGun44)</span></div><div class="archive-text"><span class="archive-line">Thanks Victor.</span><br><span class="archive-line">To clarify, I&#39;m not really stuck on reproducing the leak‚ÄîI&#39;m mostly worried about the safety of the fix.</span><br><br><span class="archive-line">I actually tried swapping in `ThreadPoolTaskExecutor` and wrote a custom `TaskDecorator` to manually pass the context to the child threads. But honestly, it feels like a minefield. The context here is huge‚Äîwe have to manually copy over MDC, Tenancy, Transactions, etc. If I miss even one obscure variable, we&#39;re going to end up with random, silent crashes in production.</span><br><br><span class="archive-line">Given how brittle that manual propagation is, do you think it&#39;s safer to just put a hard limit/cap on the current `SimpleAsyncTaskExecutor`? I&#39;m worried the `TaskDecorator` approach is just too risky to maintain.</span><br><span class="archive-line">Or is there a standard pattern in Fineract for safely propagating full context to pooled threads that I might have missed?</span></div></article><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769269748551529?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 24 Jan 2026 15:49:08 GMT">Sat 15:49</a><span class="archive-user">Victor Romero</span></div><div class="archive-text"><span class="archive-line">Krishna, that is a ticket from 3 years ago for Apache Fineract 1.8 now we are on 1.14, lot of things have changed since then. If you write a custom fix, it could work on your setup.</span></div></article><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769273933820439?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 24 Jan 2026 16:58:53 GMT">Sat 16:58</a><span class="archive-user">Krishna Mewara (DeathGun44)</span></div><div class="archive-text"><span class="archive-line">Thanks, Victor. You&#39;re right about the significant architectural changes since 1.8.</span><br><br><span class="archive-line">I&#39;ve been testing both the custom `TaskDecorator` and the simple concurrency limit approaches locally. Unfortunately, both caused significant instability during startup (crashing Liquibase), effectively validating the compatibility warnings already documented in the source:</span><br><span class="archive-line">`// The application events (for importing) rely on the inheritable thread local security context strategy` `// This is NOT compatible with threadpools so if we use threadpools the below will need to be reworked`</span><br><br><span class="archive-line">Since these standard fixes are colliding with those legacy constraints and breaking the system, I&#39;m going to hold off on a PR for now. I&#39;ll continue researching a safer approach that respects this architecture.</span></div></article><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769274179289359?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 24 Jan 2026 17:02:59 GMT">Sat 17:02</a><span class="archive-user">Victor Romero</span></div><div class="archive-text"><span class="archive-line">I thikn that the old ticket should be closed as non reproducible and a new ticket with the Rework/Improvement for the Apache Fineract Multi Threading model</span></div><div class="archive-reactions"><span class="archive-reaction">:raised_hands: 1</span></div></article><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769274251423749?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 24 Jan 2026 17:04:11 GMT">Sat 17:04</a><span class="archive-user">Victor Romero</span></div><div class="archive-text"><span class="archive-line">also I would suggest that you should have feedback from the Jira ticket reporter :slightly_smiling_face:</span></div></article><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769275018186279?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 24 Jan 2026 17:16:58 GMT">Sat 17:16</a><span class="archive-user">Krishna Mewara (DeathGun44)</span></div><div class="archive-text"><span class="archive-line">I saw you just pinged the reporter on Jira‚Äîthanks for handling that.</span><br><br><span class="archive-line">I completely agree with your assessment. While it was originally logged as a bug, my testing confirms that fixing it in 1.14 isn&#39;t a simple patch; it requires a fundamental redesign of the threading model to handle those context/Liquibase constraints safely.</span><br><br><span class="archive-line">Let&#39;s wait and see if Anjil replies. If not (or if it&#39;s stale), closing this one and opening a fresh &#39;Improvement/Rework&#39; ticket to track the architectural changes properly seems like the right direction.</span></div><div class="archive-reactions"><span class="archive-reaction">üëç 1</span></div></article><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769275197384089?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 24 Jan 2026 17:19:57 GMT">Sat 17:19</a><span class="archive-user">Victor Romero</span></div><div class="archive-text"><span class="archive-line">I mean, you can open a new one, there is no dependency. The new Jira must have another approach and title (as previously suggested) . Because the jira reported by Anjil is for an specific issue.</span></div></article><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769275224591569?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 24 Jan 2026 17:20:24 GMT">Sat 17:20</a><span class="archive-user">Victor Romero</span></div><div class="archive-text"><span class="archive-line">Please also check the dev list history about liquibase</span></div></article><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769275362294819?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 24 Jan 2026 17:22:42 GMT">Sat 17:22</a><span class="archive-user">Krishna Mewara (DeathGun44)</span></div><div class="archive-text"><span class="archive-line">Understood. That makes sense‚ÄîI&#39;ll treat them as separate workstreams.</span><br><br><span class="archive-line">I&#39;ll go ahead and open the new &#39;Improvement&#39; ticket specifically for the <strong>Threading Model Rework</strong> (focusing on the context/Liquibase constraints)</span><br><br><span class="archive-line">And thanks for the pointer on the dev list‚ÄîI&#39;ll dig through the archives to see what historical context exists regarding those Liquibase limitations.</span><br><span class="archive-line">Will proceed with that. Thanks!</span></div></article><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769276164662349?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 24 Jan 2026 17:36:04 GMT">Sat 17:36</a><span class="archive-user">Krishna Mewara (DeathGun44)</span></div><div class="archive-text"><span class="archive-line">Done. I&#39;ve opened the new Improvement ticket here: <a class="archive-link" href="https://issues.apache.org/jira/browse/FINERACT-2449">https://issues.apache.org/jira/browse/FINERACT-2449</a></span></div></article><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769276182969919?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 24 Jan 2026 17:36:22 GMT">Sat 17:36</a><span class="archive-user">Victor Romero</span></div><div class="archive-text"><span class="archive-line">The limitations about liquibase is regarding the change on its license</span></div></article><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769276286553349?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 24 Jan 2026 17:38:06 GMT">Sat 17:38</a><span class="archive-user">Krishna Mewara (DeathGun44)</span></div><div class="archive-text"><span class="archive-line">Understood. Thanks for clarifying that it&#39;s license-related rather than a technical constraint. I&#39;ll keep that context in mind.</span></div><div class="archive-reactions"><span class="archive-reaction">üëç 1</span></div></article><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769892224771719?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 31 Jan 2026 20:43:44 GMT">Sat 20:43</a><span class="archive-user">Krishna Mewara (DeathGun44)</span></div><div class="archive-text"><span class="archive-line">Hi @Victor Romero Just wanted to give you a quick update‚ÄîI‚Äôve left a comment on the PR with what I found during reproduction.</span><br><span class="archive-line">On a related note regarding <strong>FINERACT-2449</strong>: I was doing some deep diving locally, and I actually can&#39;t get the `SimpleAsyncTaskExecutor` path to trigger, so I&#39;m unable to validate the original &#39;thread accumulation&#39; premise.</span><br><span class="archive-line">Given that, do you think it would be better to:</span><br><br><ol class="archive-list archive-list-numbered"><li>Pivot the ticket to be a proactive &#39;best practice&#39; improvement (e.g., swapping the unbounded executor for a bounded one just to be safe), or</li><li>Close it for now since we can&#39;t reproduce the leak?</li></ol><span class="archive-line">I&#39;m happy to go in either direction‚Äîlet me know what you prefer!</span></div></article><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769892929325149?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 31 Jan 2026 20:55:29 GMT">Sat 20:55</a><span class="archive-user">Victor Romero</span></div><div class="archive-text"><span class="archive-line">@Krishna Mewara (DeathGun44) I have added links with testing cases, you can use them to test the scenarios, also you have to enable the Apache Fineract modes to make sure it is working on different conditions.  I have asked in the Jira to the reporter to provide more information, if we don&#39;t receive feedback,  we will close it and then instead of a Jira ticket with a bug, we can open a new ticket with the enhacement proposed and with specific use cases.</span></div></article><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769893018213099?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 31 Jan 2026 20:56:58 GMT">Sat 20:56</a><span class="archive-user">Krishna Mewara (DeathGun44)</span></div><div class="archive-text"><span class="archive-line">sounds perfect ,thanks victor!</span></div></article><article class="archive-message archive-message-reply"><div class="archive-meta"><span class="archive-reply-indicator" aria-hidden="true">&rarr;</span><span class="archive-reply-label">reply</span><a class="archive-time archive-time-link" href="https://mifos.slack.com/archives/C028634A61L/p1769893160763559?thread_ts=1769235853.276889&amp;cid=C028634A61L" title="Sat, 31 Jan 2026 20:59:20 GMT">Sat 20:59</a><span class="archive-user">Victor Romero</span></div><div class="archive-text"><span class="archive-line">Your work is valuable, just let&#39;s focuse it to the proper direction :slightly_smiling_face: making sure (with testing cases) that the different scenarios are covered and that we have some numbers to test concurrency.</span></div><div class="archive-reactions"><span class="archive-reaction">‚ù§Ô∏è 1</span></div></article></section></section>
  </main>
</body>
</html>
